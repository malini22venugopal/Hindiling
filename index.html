<!DOCTYPE html>
<html lang="hi">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>हिंदी लिंग & वचन क्विज़</title>
<style>
  body { font-family: 'Noto Sans Devanagari', sans-serif; padding: 20px; }
  .question { font-size: 22px; margin-bottom: 10px; }
  button { padding: 10px 20px; margin: 5px; font-size: 18px; }
  #quizBox { display: none; }
  #resultBox { display: none; font-size: 22px; margin-top: 20px; }
</style>
</head>

<body>

<h2>हिंदी ऑडियो क्विज़ — लिंग & वचन</h2>

<div id="loginBox">
  <label>अपना नाम लिखें:</label><br>
  <input type="text" id="username" style="font-size:20px; padding:5px;"><br><br>
  <button onclick="startLogin()">लॉगिन</button>
</div>

<div id="quizBox">
  <p id="welcome"></p>
  <p id="questionNumber"></p>
  <div class="question" id="questionText"></div>

  <button onclick="checkAnswer('pulling')">पुल्लिंग</button>
  <button onclick="checkAnswer('streeling')">स्त्रीलिंग</button>
  <button onclick="checkAnswer('ekvachan')">एकवचन</button>
  <button onclick="checkAnswer('bahuvachan')">बहुवचन</button>

  <p id="feedback" style="font-size:20px; color:blue;"></p>

  <button onclick="nextQuestion()">अगला प्रश्न</button>
</div>

<div id="resultBox">
  <p id="scoreText"></p>
  <button onclick="resetQuiz()">फिर से शुरू करें</button>
  <button onclick="logout()">लॉगआउट</button>
</div>

<script>
const scriptURL = "YOUR_GOOGLE_APPS_SCRIPT_URL_HERE";

// ORIGINAL QUESTIONS RESTORED ✔
let questions = [
  { q: "लड़का", a: "pulling" },
  { q: "लड़की", a: "streeling" },
  { q: "कुत्ते", a: "bahuvachan" },
  { q: "पेड़", a: "ekvachan" },
  { q: "बच्चे", a: "bahuvachan" },
  { q: "मकान", a: "ekvachan" }
];

let current = 0, score = 0, attempted = 0;
let user = "";

function shuffle(array) {
  for (let i = array.length - 1; i > 0; i--) {
    let j = Math.floor(Math.random() * (i + 1));
    [array[i], array[j]] = [array[j], array[i]];
  }
}

function startLogin() {
  user = document.getElementById("username").value.trim();
  if (!user) { alert("कृपया नाम लिखें"); return; }

  document.getElementById("loginBox").style.display = "none";
  document.getElementById("quizBox").style.display = "block";
  document.getElementById("welcome").innerText = `${user}, आपका क्विज़ शुरू हो गया।`;

  shuffle(questions);
  loadQuestion();
}

function loadQuestion() {
  document.getElementById("questionText").innerText = questions[current].q;
  document.getElementById("questionNumber").innerText = `प्रश्न ${current + 1} / ${questions.length}`;
  document.getElementById("feedback").innerText = "";
}

function checkAnswer(ans) {
  attempted++;
  if (ans === questions[current].a) {
    score++;
    document.getElementById("feedback").innerText = "सही उत्तर ✔";
  } else {
    document.getElementById("feedback").innerText = "गलत ❌";
  }
}

function nextQuestion() {
  current++;
  if (current >= questions.length) return finishQuiz();
  loadQuestion();
}

function finishQuiz() {
  document.getElementById("quizBox").style.display = "none";
  document.getElementById("resultBox").style.display = "block";

  document.getElementById("scoreText").innerText =
    `आपने ${attempted} में से ${score} सही दिए।`;

  sendToSheet();
}

function sendToSheet() {
  fetch(scriptURL, {
    method: "POST",
    body: JSON.stringify({
      name: user,
      score: score,
      attempted: attempted,
      remarks: score >= attempted/2 ? "Good" : "Needs Improvement"
    }),
  });
}

function resetQuiz() {
  current = 0; score = 0; attempted = 0;
  shuffle(questions);

  document.getElementById("resultBox").style.display = "none";
  document.getElementById("quizBox").style.display = "block";

  loadQuestion();
}

function logout() {
  location.reload();
}
</script>

</body>
</html>
