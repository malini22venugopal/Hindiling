<!DOCTYPE html>
<html lang="hi">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Hindi Audio Quiz</title>

<style>
body {
    font-family: Arial, sans-serif;
    margin: 20px;
    background:#f6f6f6;
}
#loginBox, #quizBox, #resultBox {
    max-width: 500px;
    margin: auto;
    padding: 20px;
    background: white;
    border-radius: 10px;
    box-shadow: 0 0 10px #ccc;
}
button {
    padding: 12px 20px;
    font-size: 18px;
    margin-top: 10px;
    width: 100%;
    background:#1976D2;
    color:white;
    border:none;
    border-radius:8px;
}
.redText { color: red; font-weight: bold; font-size: 20px; }
.optionBtn {
    padding: 15px;
    margin: 10px 0;
    width: 100%;
    font-size: 22px;
}
</style>
</head>
<body>

<!-- LOGIN -->
<div id="loginBox">
    <h2>क्विज़ लॉगिन</h2>
    <label>अपना नाम दर्ज करें:</label>
    <input id="studentName" type="text" style="width:100%;padding:12px;font-size:18px;">
    <button onclick="startLogin()">Login</button>
</div>

<!-- QUIZ -->
<div id="quizBox" style="display:none;">
    <h2 id="qText">प्रश्न</h2>
    <p class="redText" id="engText"></p>

    <button class="optionBtn" onclick="checkAnswer('sahi')">सही (Correct)</button>
    <button class="optionBtn" onclick="checkAnswer('galat')">ग़लत (Wrong)</button>

    <button onclick="nextQuestion()">अगला प्रश्न</button>
</div>

<!-- RESULT -->
<div id="resultBox" style="display:none;">
    <h2>परिणाम</h2>
    <p id="finalScore"></p>
    <button onclick="logout()">Logout</button>
</div>

<script>
// --------------------------------------
// QUIZ DATA (SAME QUESTIONS YOU USED)
// --------------------------------------
const questions = [
    {q: "शेर का लिंग पुल्लिंग है", eng:"Lion is masculine", ans:"sahi"},
    {q: "लड़की का लिंग पुल्लिंग है", eng:"Girl is masculine", ans:"galat"},
    {q: "पेड़ का वचन बहुवचन है", eng:"Tree is plural", ans:"galat"},
    {q: "किताब का वचन एकवचन है", eng:"Book is singular", ans:"sahi"},
    // ADD ALL 30 QUESTIONS HERE
];

let index = 0;
let score = 0;
let name = "";

// --------------------------------------
// LOGIN
// --------------------------------------
function startLogin() {
    name = document.getElementById("studentName").value.trim();
    if (name === "") { alert("नाम दर्ज करें"); return; }

    // Save login time
    sendToSheet({
        action:"login",
        name:name,
        time:new Date().toLocaleString()
    });

    document.getElementById("loginBox").style.display="none";
    document.getElementById("quizBox").style.display="block";

    loadQuestion();
}

// --------------------------------------
// LOAD QUESTION
// --------------------------------------
function loadQuestion() {
    if (index >= questions.length) {
        endQuiz();
        return;
    }

    const q = questions[index];
    document.getElementById("qText").innerText = q.q;
    document.getElementById("engText").innerText = q.eng;

    speakHindi(q.q);
}

// --------------------------------------
// CHECK ANSWER
// --------------------------------------
function checkAnswer(choice) {
    const q = questions[index];

    if (choice === q.ans) {
        score++;
        speakHindi("सही उत्तर");
    } else {
        speakHindi("गलत उत्तर");
    }
}

// --------------------------------------
// NEXT QUESTION
// --------------------------------------
function nextQuestion() {
    index++;
    loadQuestion();
}

// --------------------------------------
// END QUIZ
// --------------------------------------
function endQuiz() {
    document.getElementById("quizBox").style.display="none";
    document.getElementById("resultBox").style.display="block";

    document.getElementById("finalScore").innerHTML =
        "आपका स्कोर: <b>" + score + "</b> / " + questions.length;
}

// --------------------------------------
// LOGOUT + SEND REPORT
// --------------------------------------
function logout() {
    sendToSheet({
        action:"logout",
        name:name,
        score:score,
        attempted:index,
        time:new Date().toLocaleString()
    });

    alert("रिपोर्ट Gmail में भेज दी गई");
    location.reload();
}

// --------------------------------------
// HINDI SPEECH
// --------------------------------------
function speakHindi(txt) {
    const sp = new SpeechSynthesisUtterance(txt);
    sp.lang = "hi-IN";
    sp.rate = 1;
    speechSynthesis.speak(sp);
}

// --------------------------------------
// SEND DATA TO GOOGLE APPS SCRIPT
// --------------------------------------
const SCRIPT_URL = "https://script.googleusercontent.com/macros/echo?user_content_key=AehSKLjCiIrW_GqD34UFh4qt0VcQC7Q4lTmQ9UFPSHNM1Iq37medCY1OzfZA95gJDcdthS_Ax2hEhlqG5ZAr3TSxrJVq6znDk8GuaeYGke5DFVR5QuIYsDtes_M9N3PzsVgyt6PujEKsYGAbYMZeLBr7btF2z5Ggv3Crjr-469VOrAdq3vtTAv7mb0utJwdrZK-ige6P_1MHPT5PjigP_ws0xWFl4XxeLeccbzPixQw3LixBYLyWvkeo1EOX5WkoRs9TM5DriRLZdohSUxSuKi3eOmgEAW1UpGFm2AjKiWrQ&lib=MJtJLyBLhYJ-I8iv1Kb4TmqdLM6UFQ5vk";

function sendToSheet(obj) {
    fetch(SCRIPT_URL, {
        method: "POST",
        headers: {"Content-Type": "text/plain;charset=utf-8"},
        body: JSON.stringify(obj)
    })
    .then(r => r.text())
    .then(d => console.log("GS Response:", d))
    .catch(err => console.error("Error:", err));
}
</script>

</body>
</html>



