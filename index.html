<!doctype html>
<html lang="hi">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<meta name="google" content="notranslate">
<meta http-equiv="Content-Language" content="hi">
<title>рд╣рд┐рдВрджреА рдСрдбрд┐рдпреЛ рдХреНрд╡рд┐рдЬрд╝ тАФ рд▓рд┐рдВрдЧ & рд╡рдЪрди</title>
<style>
  body{
    font-family:'Noto Sans Devanagari',sans-serif;
    background:#fffaf0;
    margin:0;
    padding:20px;
    text-align:center;
  }
  h1{color:#d6336c;}
  button{
    font-size:20px;
    padding:10px 25px;
    margin:8px;
    border:none;
    border-radius:12px;
    background:#ffd700;
    color:#000;
    cursor:pointer;
  }
  button:hover{background:#ffec8b;}
  #question{font-size:26px;margin:20px 0;color:#333;}
  #answer{font-size:22px;padding:6px;width:60%;text-align:center;}
  #result{font-size:24px;margin-top:15px;}
  #score{font-size:22px;color:#006400;margin-top:20px;}
  #warning{color:red;margin-top:10px;}
</style>
</head>
<body>
  <h1>ЁЯОз рд╣рд┐рдВрджреА рдСрдбрд┐рдпреЛ рдХреНрд╡рд┐рдЬрд╝ тАФ рд▓рд┐рдВрдЧ & рд╡рдЪрди</h1>
  <div id="warning"></div>
  <div id="quiz">
    <p id="question"></p>
    <input id="answer" placeholder="рдЙрддреНрддрд░ рдмреЛрд▓реЗрдВ рдпрд╛ рдЯрд╛рдЗрдк рдХрд░реЗрдВ"/>
    <br>
    <button id="speakBtn">ЁЯОд рдмреЛрд▓реЗрдВ</button>
    <button id="checkBtn">рдЬрд╛рдБрдЪреЗрдВ тЬЕ</button>
    <button id="replayBtn">ЁЯФБ рдлрд┐рд░ рд╕реБрдиреЗрдВ</button>
    <button id="passBtn">тПня╕П рдкрд╛рд╕ рдХрд░реЗрдВ</button>
    <div id="result"></div>
    <div id="score"></div>
    <button id="resetBtn">ЁЯФД рдкреБрдирдГ рдкреНрд░рд╛рд░рдВрдн рдХрд░реЗрдВ</button>
  </div>
  <button id="startBtn">рд╢реБрд░реВ рдХрд░реЗрдВ тЦ╢я╕П</button>

<script>
const questions = [
  {q:"рд▓рдбрд╝рдХрд╛", a:"рдкреБрд▓реНрд▓рд┐рдВрдЧ"},
  {q:"рд▓рдбрд╝рдХреА", a:"рд╕реНрддреНрд░реАрд▓рд┐рдВрдЧ"},
  {q:"рд╕реЗрдм", a:"рдкреБрд▓реНрд▓рд┐рдВрдЧ"},
  {q:"рдорд╛рд▓рд╛", a:"рд╕реНрддреНрд░реАрд▓рд┐рдВрдЧ"},
  {q:"рдХрд┐рддрд╛рдмреЗрдВ", a:"рдмрд╣реБрд╡рдЪрди"},
  {q:"рдмрдЪреНрдЪрд╛", a:"рдПрдХрд╡рдЪрди"},
  {q:"рдкреЗрдбрд╝", a:"рдкреБрд▓реНрд▓рд┐рдВрдЧ"},
  {q:"рдЧрд╛рдп", a:"рд╕реНрддреНрд░реАрд▓рд┐рдВрдЧ"},
  {q:"рдлреВрд▓", a:"рдкреБрд▓реНрд▓рд┐рдВрдЧ"},
  {q:"рдШрд░", a:"рдкреБрд▓реНрд▓рд┐рдВрдЧ"}
];
let current=0, score=0, recognizing=false, recognition, voicesReady=false;
const questionEl=document.getElementById("question");
const answerEl=document.getElementById("answer");
const resultEl=document.getElementById("result");
const scoreEl=document.getElementById("score");
const warningEl=document.getElementById("warning");
const startBtn=document.getElementById("startBtn");

function shuffleArray(a){for(let i=a.length-1;i>0;i--){const j=Math.floor(Math.random()*(i+1));[a[i],a[j]]=[a[j],a[i]];}return a;}

function speak(text){
  if(!voicesReady)return;
  const utter=new SpeechSynthesisUtterance(text);
  utter.lang="hi-IN";
  utter.rate=1;
  const v=speechSynthesis.getVoices().find(v=>v.lang.startsWith("hi"));
  if(v) utter.voice=v;
  speechSynthesis.speak(utter);
}

function checkAnswer(){
  const user=answerEl.value.trim();
  if(!user)return;
  const correct=questions[current].a;
  if(user===correct){
    resultEl.textContent="тЬЕ рд╕рд╣реА рдЙрддреНрддрд░!";
    speak("рд╕рд╣реА рдЙрддреНрддрд░!");
    score++;
  }else{
    resultEl.textContent="тЭМ рдЧрд▓рдд рдЙрддреНрддрд░! рд╕рд╣реА рд╣реИ: "+correct;
    speak("рдЧрд▓рдд рдЙрддреНрддрд░ред рд╕рд╣реА рдЙрддреНрддрд░ рд╣реИ "+correct);
  }
  current++;
  answerEl.value="";
  if(current<questions.length){setTimeout(showQuestion,1000);}
  else showScore();
}

function showQuestion(){
  const q=questions[current].q;
  questionEl.textContent="рдкреНрд░рд╢реНрди "+(current+1)+" : "+q+" рдХрд╛ рд▓рд┐рдВрдЧ рдпрд╛ рд╡рдЪрди рдмрддрд╛рдЗрдПред";
  speak(q+" рдХрд╛ рд▓рд┐рдВрдЧ рдпрд╛ рд╡рдЪрди рдмрддрд╛рдЗрдП");
  resultEl.textContent="";
}

function showScore(){
  questionEl.textContent="";
  resultEl.textContent="";
  const total=questions.length;
  scoreEl.textContent="рдЖрдкрдХрд╛ рд╕реНрдХреЛрд░: "+score+" / "+total;
  speak("рдЖрдкрдХрд╛ рд╕реНрдХреЛрд░ рд╣реИ "+score+" рдореЗрдВ рд╕реЗ "+total);
}

function resetQuiz(){
  score=0;current=0;
  shuffleArray(questions);
  scoreEl.textContent="";
  resultEl.textContent="";
  startBtn.style.display="inline-block";
  document.getElementById("quiz").style.display="none";
}

startBtn.onclick=()=>{
  shuffleArray(questions);
  startBtn.style.display="none";
  document.getElementById("quiz").style.display="block";
  showQuestion();
};

document.getElementById("checkBtn").onclick=checkAnswer;
document.getElementById("replayBtn").onclick=()=>speak(questions[current].q);
document.getElementById("passBtn").onclick=()=>{current++; if(current<questions.length)showQuestion(); else showScore();};
document.getElementById("resetBtn").onclick=resetQuiz;

if('webkitSpeechRecognition' in window){
  recognition=new webkitSpeechRecognition();
  recognition.lang="hi-IN";
  recognition.onresult=(e)=>{
    answerEl.value=e.results[0][0].transcript.trim();
  };
}
document.getElementById("speakBtn").onclick=()=>{
  if(!recognition)return;
  if(!recognizing){recognition.start();recognizing=true;}
  recognition.onend=()=>{recognizing=false;}
};

// Hindi voice detection fix
function checkHindiVoice(){
  const v=speechSynthesis.getVoices().some(v=>v.lang.startsWith("hi"));
  if(v){voicesReady=true;warningEl.textContent="";return;}
  setTimeout(()=>{
    const voices=speechSynthesis.getVoices();
    if(voices.some(v=>v.lang.startsWith("hi"))){
      voicesReady=true;warningEl.textContent="";
    }else{
      warningEl.textContent="тЪая╕П рдЖрдкрдХрд╛ рдмреНрд░рд╛рдЙрдЬрд╝рд░ рд╣рд┐рдВрджреА рд╡реЙрдЗрд╕ рдХреЛ рд╕рдкреЛрд░реНрдЯ рдирд╣реАрдВ рдХрд░рддрд╛ред";
    }
  },2000);
}
speechSynthesis.onvoiceschanged=checkHindiVoice;
checkHindiVoice();
</script>
</body>
</html>
